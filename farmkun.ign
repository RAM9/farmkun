{
  "ignition": {
    "version": "3.4.0"
  },
  "passwd": {
    "users": [
      {
        "groups": [
          "wheel",
          "sudo"
        ],
        "name": "core",
        "passwordHash": "$1$82024$51fV6RLyDo3oFsfkc3H7S/",
        "sshAuthorizedKeys": [
          "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFBQm/e9Ej4PuQuo/M2IV0/IxGAOE83oMnBCwBn2WAaP",
          "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDGyraMnjnSZiPrRZKkRixfA9qatS8EA5AD1mhRP7bRp8d2ix98lp2NvJ43hC4aEmH/PWIfPPAMVPR0URMydS65xJHvQwl/Z6ULJuYxp6Lwlfec3KfrPOy4QmKUc+hfJC3gu5U7HW6iU7s91gPGz4IO1p/XPmi0GLfWBAbqLhcvteIykQ4zlFHdjdHy07gc3IICoSvQhOgBjhAMwtkr0tWJeXIbdk70f/bOha4tr1GM493IBrtoFkK95Na7HnAw8Jj7TAIh8LqB8FWwU8zkXl0wUHN3jz5Vg6IWdINfY7OSNwmnSjWH5FHPYS85uSrodLiAIusAe2ulFtO61wTGjqVylgspVXLklF7Kpyoyf5AtoxlVMPFN0uiZqhuJ3JaBn0e0gbQvGwPQKo2ZV+dmssIvatKg3MDDURJfT/k0gIViomyzD/Ol8RIy6uCTqHV4fa5MvgCGj3Yy7oN3vNhqdbqxsfHBh3E/x+rXnNHSn27OUhVSBLe3INgPnKghnTSRyHNu7b5jwCqzWan0DY7TkGzv/JL2onFpQWFKoziQ89h5yWcOD8OOMmWJZ5r4rp3qGBkyB8e3CNxDNRobhDVU8ZG7AKz5avLAgL43pNbnYzDrTDtP/Q9EVKrLKFK0pkaNtKmRx8Dr1oXlpODWBoOHgqnV92y0au7SVzN05/RFUcyp6Q=="
        ]
      }
    ]
  },
  "storage": {
    "disks": [
      {
        "device": "/dev/disk/by-id/coreos-boot-disk",
        "partitions": [
          {
            "label": "root",
            "number": 4,
            "resize": true,
            "sizeMiB": 8192
          },
          {
            "label": "var",
            "sizeMiB": 0
          }
        ],
        "wipeTable": false
      }
    ],
    "files": [
      {
        "overwrite": true,
        "path": "/etc/rancher/post-install.bash",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/8SU8WvjNhTHf/df8Z1daMLVVtPbdm3aZhyFjIOjg+3GDMdxyPJzLCxLQZIbStf/fchOe8kl3BoGu19CLL33fdL7fp6SH1ghNSN9h4K7OkpA3BFMhc5R1O8pjdSB3XHLlCyY5VrUZJlt6Kzfb7qChFdgnbNMGcHV5vI+xbYppUW6BLPGeJaF0K1a5MV2nfCT3fNWbaYwYXQlF1GUQCjiFksrjcWw2lnupdGRbZHaaltSm5L2boQyXx9xZz9KsCAPd+88tbDEy/vIGkXXR6M+tTbOa94S/kb/zVcNjh/cUkk/Opqc8BPEWTx+vHx4fFhaqT1cVzhvR/zj5NOJIr3w9SiuuG3j8avJyevx4+XxOJIVPiI+CnViXF8jLoyP8ekSviYdYagkOquQVg1q75duylhQaTqdWd5eZEJML17/+BMTXJD1LgJ60aNfgt7phhaQQL+aoOWilppcvzRgImqDeDabzeam0yV+77SWeoH5UAdXV1dXcQSQcrQWKoL5wuhSBjuQopLW+SftfdLI8xx/cdsrh/9vF6Q9VlIpaONREHihCN6gkroM4t4apcg+169ktCs7Jx9qLnCjOufJ4mYTlOfcBO9u//jw9v173Px2O3/361ZzQ2OnjE3enGWTN9lpdjY9Pz+/YDyc8PMA3oBpavZQvBHwrFq3psTPp6cvC9+8Tu9AcLgwHikceR9uF1LT/kDxU9aAaphR0n3rvsRkjuydFLQb6jy3HmmqzWpfPKkdJJtObyKZBL7EutfSgat+VmDX0Mi1p5bc0ugSK+lrfIEzAdclfC0dpNPHPsjuwPN/Y49vc/8CVA6EZC+PB7Pz3+bx1uxcuOrbMMWHYI/RNDhZkDDtk0nhkcUhnenTPn+X/ux7L745X2EKyP7LgA1BB0zYVwlr17bPled5Hkz5UzfarDTC+E1H/RSOQ7fzPO9bXsnL6J8AAAD//4w3EpPdBwAA"
        },
        "mode": 484
      },
      {
        "overwrite": true,
        "path": "/etc/rancher/install.sh",
        "contents": {
          "source": "https://get.rke2.io"
        }
      },
      {
        "overwrite": true,
        "path": "/etc/profile.d/zzz-default-editor.sh",
        "contents": {
          "compression": "",
          "source": "data:,export%20EDITOR%3Dvim%0A"
        }
      }
    ],
    "filesystems": [
      {
        "device": "/dev/disk/by-partlabel/var",
        "format": "ext4",
        "path": "/var",
        "wipeFilesystem": false
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "contents": "# Generated by Butane\n[Unit]\nRequires=systemd-fsck@dev-disk-by\\x2dpartlabel-var.service\nAfter=systemd-fsck@dev-disk-by\\x2dpartlabel-var.service\n\n[Mount]\nWhere=/var\nWhat=/dev/disk/by-partlabel/var\nType=ext4\n\n[Install]\nRequiredBy=local-fs.target",
        "enabled": true,
        "name": "var.mount"
      },
      {
        "contents": "[Unit]\nDescription=Install Rancher2 Via Tar\nWants=network-online.target\nAfter=network-online.target\nBefore=zincati.service\nConditionPathExists=!/var/lib/%N.stamp\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/bin/sh /etc/rancher/install.sh\nExecStart=/bin/touch /var/lib/%N.stamp\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "install-rancher2-tar.service"
      },
      {
        "contents": "[Unit]\nDescription=Run Rancher Kubernetes according to machine role\nWants=network-online.target\nAfter=install-rancher2-tar.service\nBefore=zincati.service\n[Service]\nExecStart=/bin/bash /etc/rancher/post-install.bash\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "farm.ram9.cc.service"
      },
      {
        "contents": "[Unit]\nDescription=Layer vim with rpm-ostree\nWants=network-online.target\nAfter=install-rancher2-tar.service\n# We run before `zincati.service` to avoid conflicting rpm-ostree\n# transactions.\nBefore=zincati.service\nConditionPathExists=!/var/lib/%N.stamp\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/usr/bin/rpm-ostree install -y --allow-inactive vim\nExecStart=/bin/touch /var/lib/%N.stamp\nExecStart=/bin/systemctl --no-block reboot\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "rpm-ostree-install-vim.service"
      }
    ]
  }
}
