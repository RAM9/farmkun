{
  "ignition": {
    "version": "3.4.0"
  },
  "passwd": {
    "users": [
      {
        "groups": [
          "wheel",
          "sudo"
        ],
        "name": "core",
        "passwordHash": "$1$82024$51fV6RLyDo3oFsfkc3H7S/",
        "sshAuthorizedKeys": [
          "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFBQm/e9Ej4PuQuo/M2IV0/IxGAOE83oMnBCwBn2WAaP",
          "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDGyraMnjnSZiPrRZKkRixfA9qatS8EA5AD1mhRP7bRp8d2ix98lp2NvJ43hC4aEmH/PWIfPPAMVPR0URMydS65xJHvQwl/Z6ULJuYxp6Lwlfec3KfrPOy4QmKUc+hfJC3gu5U7HW6iU7s91gPGz4IO1p/XPmi0GLfWBAbqLhcvteIykQ4zlFHdjdHy07gc3IICoSvQhOgBjhAMwtkr0tWJeXIbdk70f/bOha4tr1GM493IBrtoFkK95Na7HnAw8Jj7TAIh8LqB8FWwU8zkXl0wUHN3jz5Vg6IWdINfY7OSNwmnSjWH5FHPYS85uSrodLiAIusAe2ulFtO61wTGjqVylgspVXLklF7Kpyoyf5AtoxlVMPFN0uiZqhuJ3JaBn0e0gbQvGwPQKo2ZV+dmssIvatKg3MDDURJfT/k0gIViomyzD/Ol8RIy6uCTqHV4fa5MvgCGj3Yy7oN3vNhqdbqxsfHBh3E/x+rXnNHSn27OUhVSBLe3INgPnKghnTSRyHNu7b5jwCqzWan0DY7TkGzv/JL2onFpQWFKoziQ89h5yWcOD8OOMmWJZ5r4rp3qGBkyB8e3CNxDNRobhDVU8ZG7AKz5avLAgL43pNbnYzDrTDtP/Q9EVKrLKFK0pkaNtKmRx8Dr1oXlpODWBoOHgqnV92y0au7SVzN05/RFUcyp6Q=="
        ]
      }
    ]
  },
  "storage": {
    "disks": [
      {
        "device": "/dev/disk/by-id/coreos-boot-disk",
        "partitions": [
          {
            "label": "root",
            "number": 4,
            "resize": true,
            "sizeMiB": 8192
          },
          {
            "label": "var",
            "sizeMiB": 0
          }
        ],
        "wipeTable": false
      }
    ],
    "files": [
      {
        "overwrite": true,
        "path": "/etc/rancher/post-install.bash",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/8SUb2sjNxDG3++neLoOxOay3qTXFi7/yhFIOThSaK904TgOrXbWK6yVzGg2JqT57kWyk9hnc71QaN8YrzTzjDTPbzT6rqyNK8ndolahy0YgFQi+xRAoS3vWoQgobxWX1tQlK6c74pLn9H3anw81abEoh8Cl9VrZzeV9iv28MYxigZK9l3IaQ7dqkejtOvFneqd6u5lSau9aM8uyEbQlxViw8YzV6sBKjHcZ9yi43ZZ0vqG9G7HMl0fc2c9GmJEg3AWhHkyqucvYW7o4GKfUzgdxqif8hfStlnMc3oeFNTI+ODlSR8in+eTh7P7hfsHGCcJQB+Gx+njy6ciSm0k3zlvFfT55dXL0evJwdjjJTIuPyA9inRwXF8hrLzk+nUE6chlWlfTAFkU7RyeyCKdlGVXmg5uy6t9MtT598/qHH0utNLGEDEiiBz9HveMNLWAE9+oEvdKdcRTS0goT3Xnkl5eXl9d+cA1+G5wzbobrVR2cn5+f5xlANtBaqI7ma+8aE+1AgdZwkEftfdKoqgp/Kk7K8f/bGTnB0lgL5wU1QdWWIB6tcU0UF/bWEj/Vb022K3tNEmvOcGWHIMS42gTlKXeEdze/f3j7/j2ufr25fvfLdnOfe7vCbLpgc6uEShUP+Xm9mEgt/B6QNwKehLveN/jp+PjbwjdvlEyIJtdeUCCQSLxgTC3SgfLHrBWtcUzJpe49x0wD8a3RtBsaRLGgKJxf7osnu0PlfHCbVI4iYnrdbhOgbBoX8Jobs7aVKSy8a7A00uGZzxGUayCdCTDBHUqU3eHnvyYfX0f/22h5ISd7qXwxPv9uKm/8zp3b1IlTfIgOeUcrM2vSvn/0KT61eGFzUubn/6VF+x6Or05ZnAXifxizVdAL5uyLhLVx2+eqqqqKvvzh5s4vHeIQno7TLE5iw6uqSl1vzVn2dwAAAP///ntA+uYHAAA="
        },
        "mode": 484
      },
      {
        "overwrite": true,
        "path": "/etc/rancher/install.sh",
        "contents": {
          "source": "https://get.rke2.io"
        }
      },
      {
        "overwrite": true,
        "path": "/etc/profile.d/zzz-default-editor.sh",
        "contents": {
          "compression": "",
          "source": "data:,export%20EDITOR%3Dvim%0A"
        }
      }
    ],
    "filesystems": [
      {
        "device": "/dev/disk/by-partlabel/var",
        "format": "ext4",
        "path": "/var",
        "wipeFilesystem": false
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "contents": "# Generated by Butane\n[Unit]\nRequires=systemd-fsck@dev-disk-by\\x2dpartlabel-var.service\nAfter=systemd-fsck@dev-disk-by\\x2dpartlabel-var.service\n\n[Mount]\nWhere=/var\nWhat=/dev/disk/by-partlabel/var\nType=ext4\n\n[Install]\nRequiredBy=local-fs.target",
        "enabled": true,
        "name": "var.mount"
      },
      {
        "contents": "[Unit]\nDescription=Install Rancher2 Via Tar\nWants=network-online.target\nAfter=network-online.target\nBefore=zincati.service\nConditionPathExists=!/var/lib/%N.stamp\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/bin/sh /etc/rancher/install.sh\nExecStart=/bin/touch /var/lib/%N.stamp\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "install-rancher2-tar.service"
      },
      {
        "contents": "[Unit]\nDescription=Run Rancher Kubernetes according to machine role\nWants=network-online.target\nAfter=install-rancher2-tar.service\nBefore=zincati.service\n[Service]\nExecStart=/bin/bash /etc/rancher/post-install.bash\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "farm.ram9.cc.service"
      },
      {
        "contents": "[Unit]\nDescription=Layer vim with rpm-ostree\nWants=network-online.target\nAfter=install-rancher2-tar.service\n# We run before `zincati.service` to avoid conflicting rpm-ostree\n# transactions.\nBefore=zincati.service\nConditionPathExists=!/var/lib/%N.stamp\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/usr/bin/rpm-ostree install -y --allow-inactive vim\nExecStart=/bin/touch /var/lib/%N.stamp\nExecStart=/bin/systemctl --no-block reboot\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "rpm-ostree-install-vim.service"
      }
    ]
  }
}
